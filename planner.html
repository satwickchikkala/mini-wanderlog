<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>DESTINAI â€” Planner</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #e3f2fd 0%, #f1f8e9 50%, #fce4ec 100%);
      min-height: 100vh;
      color: #2d3748;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: 'ğŸ”ï¸ âœˆï¸ ğŸ—» ğŸ•ï¸ ğŸš â›°ï¸ ğŸ¿ ğŸ–ï¸ ğŸï¸ ğŸ—ºï¸ ğŸ§³ ğŸ“ ğŸ’ ğŸš— ğŸ° ğŸ¡ ğŸ¢ ğŸ  ğŸª ğŸ­ ğŸ¨ ğŸª ğŸ”ï¸ âœˆï¸ ğŸ—» ğŸ•ï¸ ğŸš â›°ï¸ ğŸ¿ ğŸ–ï¸ ğŸï¸ ğŸ—ºï¸ ğŸ§³ ğŸ“ ğŸ’ ğŸš— ğŸ° ğŸ¡';
      position: fixed;
      top: 0;
      left: 0;
      width: 300%;
      height: 100%;
      font-size: 2.5rem;
      opacity: 0.15;
      z-index: -2;
      animation: float 25s infinite linear;
      word-spacing: 80px;
      line-height: 120px;
      pointer-events: none;
      color: #667eea;
    }

    @keyframes float {
      0% { transform: translateX(-66%) translateY(-30px) rotate(0deg); }
      100% { transform: translateX(-33%) translateY(-30px) rotate(5deg); }
    }

    .snowflake {
      position: fixed;
      top: -10px;
      color: rgba(102, 126, 234, 0.6);
      user-select: none;
      pointer-events: none;
      z-index: -1;
      animation: snowfall linear infinite;
      font-size: 1.2rem;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }

    @keyframes snowfall {
      0% { 
        transform: translateY(-10px) rotate(0deg); 
        opacity: 1; 
      }
      50% {
        opacity: 0.8;
      }
      100% { 
        transform: translateY(100vh) rotate(360deg); 
        opacity: 0.2; 
      }
    }

    .snowflake:nth-child(odd) { 
      animation-duration: 8s; 
      color: rgba(118, 75, 162, 0.7);
    }
    .snowflake:nth-child(even) { 
      animation-duration: 12s; 
      color: rgba(102, 126, 234, 0.7);
    }
    .snowflake:nth-child(3n) { 
      animation-duration: 15s; 
      font-size: 0.9rem; 
      color: rgba(255, 193, 7, 0.6);
    }
    .snowflake:nth-child(4n) { 
      animation-duration: 10s; 
      font-size: 1.4rem; 
      color: rgba(233, 30, 99, 0.6);
    }

    .topbar {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid #e2e8f0;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    #plannerTitle {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4a5568;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    #plannerTitle::before {
      content: 'ğŸ“‹';
      font-size: 1.3rem;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    .topbar button {
      padding: 10px 20px;
      border: 2px solid #e2e8f0;
      border-radius: 25px;
      background: white;
      color: #4a5568;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-left: 12px;
    }

    .topbar button:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
      transform: translateY(-1px);
    }

    #saveBtn, #exportPdfBtn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border-color: transparent;
    }

    #saveBtn:hover, #exportPdfBtn:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
      animation: fadeIn 0.6s ease-out;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .card h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 25px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .card h2::before {
      content: 'âœˆï¸';
      font-size: 1.2rem;
      animation: bounce 2s infinite;
    }

    .card:nth-child(2) h2::before {
      content: 'ğŸ—ºï¸';
      animation: spin 3s linear infinite;
    }

    .card:nth-child(3) h2::before {
      content: 'ğŸ“';
      animation: bookFlip 3s infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes bookFlip {
      0%, 100% { transform: rotateY(0deg); }
      50% { transform: rotateY(180deg); }
    }

    .row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 30px;
    }

    .col h3 {
      font-size: 1.2rem;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .col:nth-child(1) h3::before {
      content: 'ğŸ¨';
    }

    .col:nth-child(2) h3::before {
      content: 'ğŸª';
    }

    .col:nth-child(3) h3::before {
      content: 'ğŸ½ï¸';
    }

    .poi-note { 
      font-size: 12px; 
      color: #666; 
    }

    .badge { 
      display: inline-block; 
      padding: 2px 6px; 
      border-radius: 6px; 
      font-size: 12px; 
      background: #e8f5f3; 
    }

    .list-checks label { 
      display: block; 
      margin: 8px 0; 
      padding: 12px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .list-checks label:hover {
      background: rgba(102, 126, 234, 0.1);
      border-color: #667eea;
      transform: translateY(-2px);
    }

    .muted { 
      color: #a0aec0; 
      font-size: 0.9rem; 
      margin-bottom: 15px;
      font-style: italic;
    }

    /* Animated Day Blocks for Generated Itinerary */
    .day-block {
      padding: 25px;
      border-radius: 20px;
      margin-bottom: 25px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      animation: dayBlockSlide 0.6s ease-out;
    }

    .day-block:nth-child(odd) {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      border: 2px solid rgba(102, 126, 234, 0.2);
    }

    .day-block:nth-child(even) {
      background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1));
      border: 2px solid rgba(255, 193, 7, 0.2);
    }

    .day-block:nth-child(3n) {
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(129, 199, 132, 0.1));
      border: 2px solid rgba(76, 175, 80, 0.2);
    }

    .day-block:nth-child(4n) {
      background: linear-gradient(135deg, rgba(233, 30, 99, 0.1), rgba(240, 98, 146, 0.1));
      border: 2px solid rgba(233, 30, 99, 0.2);
    }

    .day-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: shimmer 3s infinite;
      animation-delay: calc(var(--day-index, 0) * 0.5s);
    }

    @keyframes shimmer {
      0% { left: -100%; }
      50% { left: 100%; }
      100% { left: 100%; }
    }

    @keyframes dayBlockSlide {
      from {
        opacity: 0;
        transform: translateX(-30px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateX(0) scale(1);
      }
    }

    .day-block:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
    }

    .day-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      position: relative;
      z-index: 2;
    }

    .day-title::before {
      content: 'ğŸ“…';
      font-size: 1.3rem;
      animation: dayPulse 2s ease-in-out infinite;
    }

    @keyframes dayPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .day-content {
      position: relative;
      z-index: 2;
      line-height: 1.6;
      color: #4a5568;
    }

    .day-block-1 {
      --day-index: 1;
    }

    .day-block-2 {
      --day-index: 2;
    }

    .day-block-3 {
      --day-index: 3;
    }

    .day-block-4 {
      --day-index: 4;
    }

    #autoGenerateBtn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    #autoGenerateBtn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    #autoGenerateBtn:hover::before {
      left: 100%;
    }

    #autoGenerateBtn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    /* Floating action bubbles */
    .action-bubble {
      position: fixed;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 50;
      animation: floatBubble 6s ease-in-out infinite;
    }

    .action-bubble:hover {
      transform: scale(1.1);
      box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
    }

    .bubble-1 {
      bottom: 100px;
      right: 50px;
      animation-delay: 0s;
    }

    .bubble-2 {
      bottom: 180px;
      right: 120px;
      animation-delay: 2s;
    }

    .bubble-3 {
      bottom: 140px;
      right: 200px;
      animation-delay: 4s;
    }

    @keyframes floatBubble {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-15px) rotate(5deg); }
      66% { transform: translateY(-5px) rotate(-5deg); }
    }

    #tripSummary {
      padding: 20px;
      background: rgba(102, 126, 234, 0.05);
      border-radius: 15px;
      border-left: 4px solid #667eea;
      font-size: 1.1rem;
      line-height: 1.6;
    }

    #generatedItinerary {
      min-height: 200px;
    }

    @media (max-width: 768px) {
      .topbar {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .row {
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .container {
        padding: 20px 15px;
      }

      .card {
        padding: 20px;
      }

      .action-bubble {
        display: none;
      }

      .day-block {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- Enhanced Snowfall Effect matching dashboard -->
  <div class="snowflake" style="left: 5%; animation-delay: 0s;">ğŸ¿</div>
  <div class="snowflake" style="left: 15%; animation-delay: 1s;">â­</div>
  <div class="snowflake" style="left: 25%; animation-delay: 2s;">ğŸ”ï¸</div>
  <div class="snowflake" style="left: 35%; animation-delay: 3s;">âœ¨</div>
  <div class="snowflake" style="left: 45%; animation-delay: 4s;">ğŸª</div>
  <div class="snowflake" style="left: 55%; animation-delay: 5s;">â­</div>
  <div class="snowflake" style="left: 65%; animation-delay: 6s;">ğŸ¡</div>
  <div class="snowflake" style="left: 75%; animation-delay: 7s;">âœ¨</div>
  <div class="snowflake" style="left: 85%; animation-delay: 8s;">ğŸ¢</div>
  <div class="snowflake" style="left: 95%; animation-delay: 9s;">â­</div>
  <div class="snowflake" style="left: 10%; animation-delay: 2.5s;">ğŸš</div>
  <div class="snowflake" style="left: 30%; animation-delay: 4.5s;">ğŸ–ï¸</div>
  <div class="snowflake" style="left: 50%; animation-delay: 6.5s;">âœ¨</div>
  <div class="snowflake" style="left: 70%; animation-delay: 8.5s;">ğŸ </div>
  <div class="snowflake" style="left: 90%; animation-delay: 1.5s;">â­</div>
  <div class="snowflake" style="left: 20%; animation-delay: 3.5s;">ğŸ—»</div>
  <div class="snowflake" style="left: 40%; animation-delay: 5.5s;">ğŸï¸</div>
  <div class="snowflake" style="left: 60%; animation-delay: 7.5s;">âœ¨</div>
  <div class="snowflake" style="left: 80%; animation-delay: 9.5s;">ğŸ­</div>

  

  <div class="topbar">
    <div id="plannerTitle">Planner</div>
    <div>
      <button id="backBtn">Back</button>
      <button id="saveBtn">Save Itinerary</button>
      <button id="exportPdfBtn">Export PDF</button>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <h2>Trip Summary</h2>
      <div id="tripSummary">Loading...</div>
    </div>

    <div class="card row">
      <div class="col">
        <h3>Hotels</h3>
        <div class="muted">Tip: select 1 preferred stay.</div>
        <div id="hotelsList" class="list-checks">Loading...</div>
      </div>
      <div class="col">
        <h3>Attractions</h3>
        <div class="muted">Pick a few you care about â€” we'll optimize the route.</div>
        <div id="attractionsList" class="list-checks">Loading...</div>
      </div>
      <div class="col">
        <h3>Restaurants</h3>
        <div class="muted">Pick dinner spots; we'll place them in evenings.</div>
        <div id="restaurantsList" class="list-checks">Loading...</div>
      </div>
    </div>

    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <h2>Generated Itinerary</h2>
        <button id="autoGenerateBtn">Auto-generate schedule from selected items</button>
      </div>
      <div id="generatedItinerary" class="muted">No itinerary generated yet.</div>
    </div>
  </div>

  <!-- jsPDF + AutoTable for beautiful PDFs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>

  <script>
    // Demo function to show animated day blocks
    function generateSampleItinerary() {
      const itineraryDiv = document.getElementById('generatedItinerary');
      
      // Sample itinerary data
      const sampleItinerary = `
        <div class="day-block day-block-1">
          <div class="day-title">Day 1 - Arrival & City Exploration</div>
          <div class="day-content">
            <strong>Morning:</strong> Arrive at hotel, check-in and freshen up<br>
            <strong>Afternoon:</strong> Visit Central Park and nearby attractions<br>
            <strong>Evening:</strong> Dinner at Times Square restaurant
          </div>
        </div>
        
        <div class="day-block day-block-2">
          <div class="day-title">Day 2 - Cultural & Historical Sites</div>
          <div class="day-content">
            <strong>Morning:</strong> Museum visits and art galleries<br>
            <strong>Afternoon:</strong> Historical landmarks tour<br>
            <strong>Evening:</strong> Local cuisine experience
          </div>
        </div>
        
        <div class="day-block day-block-3">
          <div class="day-title">Day 3 - Adventure & Nature</div>
          <div class="day-content">
            <strong>Morning:</strong> Outdoor activities and nature walks<br>
            <strong>Afternoon:</strong> Adventure sports and scenic views<br>
            <strong>Evening:</strong> Sunset dining experience
          </div>
        </div>
        
        <div class="day-block day-block-4">
          <div class="day-title">Day 4 - Shopping & Departure</div>
          <div class="day-content">
            <strong>Morning:</strong> Shopping districts and local markets<br>
            <strong>Afternoon:</strong> Last-minute sightseeing<br>
            <strong>Evening:</strong> Departure preparations
          </div>
        </div>
      `;
      
      itineraryDiv.innerHTML = sampleItinerary;
    }

    // Auto-generate button functionality
    document.getElementById('autoGenerateBtn').addEventListener('click', function() {
      generateSampleItinerary();
    });

    // Sample data loading simulation
    document.addEventListener('DOMContentLoaded', function() {
      // Trip Summary
      document.getElementById('tripSummary').innerHTML = `
        <strong>ğŸ¯ Destination:</strong> New York City, USA<br>
        <strong>ğŸ“… Duration:</strong> 4 days, 3 nights<br>
        <strong>ğŸ’° Budget:</strong> $2,500 USD<br>
        <strong>ğŸ¤– AI Assistant:</strong> Enabled with Adventure Buddy
      `;

      // Hotels List
      document.getElementById('hotelsList').innerHTML = `
        <label><input type="checkbox"> ğŸ¨ Grand Central Hotel - $200/night</label>
        <label><input type="checkbox"> ğŸ¨ Times Square Inn - $150/night</label>
        <label><input type="checkbox" checked> ğŸ¨ Manhattan Plaza - $180/night</label>
      `;

      // Attractions List
      document.getElementById('attractionsList').innerHTML = `
        <label><input type="checkbox" checked> ğŸ—½ Statue of Liberty</label>
        <label><input type="checkbox"> ğŸŒ‰ Brooklyn Bridge</label>
        <label><input type="checkbox" checked> ğŸ­ Broadway Show</label>
        <label><input type="checkbox"> ğŸ›ï¸ Metropolitan Museum</label>
      `;

      // Restaurants List
      document.getElementById('restaurantsList').innerHTML = `
        <label><input type="checkbox" checked> ğŸ• Joe's Pizza</label>
        <label><input type="checkbox"> ğŸ¥© Peter Luger Steakhouse</label>
        <label><input type="checkbox" checked> ğŸœ Ramen Yashida</label>
      `;
    });
  </script>

  <script type="module" src="scripts/planner.js"></script>
  <script type="module" src="scripts/map.js"></script>
</body>
</html>
